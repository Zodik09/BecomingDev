<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Simon Game</title>
    <!-- Linking an external font for the game's title -->
    <link
      href="https://fonts.googleapis.com/css?family=Press+Start+2P"
      rel="stylesheet"
    />
    <style>
      /* Basic styles for the game body */
      body {
        text-align: center;
        background-color: #011F3F;
      }

      /* Styling the game title */
      #level-title {
        font-family: 'Press Start 2P', cursive;
        font-size: 3rem;
        margin: 2%;
        color: #FEF2BF;
      }

      /* Styling the button container */
      .container {
        display: block;
        width: 50%;
        margin: 5% auto;
      }

      /* General styles for game buttons */
      .btn {
        margin: 10px 20px;
        display: inline-block;
        height: 200px;
        width: 200px;
        border: 10px solid rgba(255, 255, 255, 0.712);
        border-radius: 20%; /* Rounded corners for buttons */
      }

      /* Game-over effect for the body */
      .game-over {
        background-color: red;
        opacity: 0.8;
      }

      /* Colors for specific buttons */
      .red {
        background-color: red;
      }

      .green {
        background-color: green;
      }

      .blue {
        background-color: blue;
      }

      .yellow {
        background-color: yellow;
      }

      /* Animation effect when a button is pressed */
      .pressed {
        box-shadow: 0 0 20px white;
        background-color: grey;
      }
    </style>
  </head>

  <body>
    <!-- Game title -->
    <h1 id="level-title">Press A Key to Start</h1>
    <!-- Container for game buttons -->
    <div class="container">
      <div class="row">
        <!-- Individual buttons with unique IDs and colors -->
        <div type="button" id="green" class="btn green"></div>
        <div type="button" id="red" class="btn red"></div>
      </div>

      <div class="row">
        <div type="button" id="yellow" class="btn yellow"></div>
        <div type="button" id="blue" class="btn blue"></div>
      </div>
    </div>
    <!-- Adding jQuery library for easier DOM manipulation -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
      // Array storing button colors
      var buttonColours = ["red", "blue", "green", "yellow"];

      // Game pattern (sequence of colors to match)
      var gamePattern = [];

      // User's clicked pattern
      var userClickedPattern = [];

      // Game state variables
      var started = false; // Tracks whether the game has started
      var level = 0;       // Tracks the current level

      // Start the game when a key is pressed
      $(document).keydown(function () {
        if (!started) {
          $("#level-title").text("Level " + level); // Update the level title
          nextSequence(); // Generate the first sequence
          started = true;
        }
      });

      // Handle user button clicks
      $(".btn").click(function () {
        var userChosenColour = $(this).attr("id"); // Get the ID of the clicked button
        userClickedPattern.push(userChosenColour); // Add it to the user's pattern

        playSound(userChosenColour); // Play the button's sound
        animatePress(userChosenColour); // Animate the button press
      });

      // Generate the next sequence in the game
      function nextSequence() {
        level++; // Increment the level
        $("#level-title").text("Level " + level); // Update the level title

        // Generate a random color for the sequence
        var randomNumber = Math.floor(Math.random() * 4); // Random number between 0-3
        var randomChosenColour = buttonColours[randomNumber]; // Select a color
        gamePattern.push(randomChosenColour); // Add to the game pattern

        // Visual feedback for the random chosen button
        $("#" + randomChosenColour)
          .fadeOut(100)
          .fadeIn(100);

        playSound(randomChosenColour); // Play sound for the chosen color
      }

      // Play a sound corresponding to a button
      function playSound(name) {
        var audio = new Audio("./sounds/" + name + ".mp3"); // Load sound file
        audio.play(); // Play the sound
      }

      // Animate a button when it's pressed
      function animatePress(currentColour) {
        $("#" + currentColour).addClass("pressed"); // Add pressed effect
        setTimeout(() => {
          $("#" + currentColour).removeClass("pressed"); // Remove effect after delay
        }, 100);
      }
    </script>
  </body>
</html>
